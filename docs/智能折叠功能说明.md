# 智能折叠功能使用说明

## 功能概述

控制面板现在具备智能折叠功能，当控件未启用时，相关设置自动折叠隐藏，使界面更加简洁清晰。

## 使用方法

### 1. 启用控件
勾选控件的"显示"复选框（如"显示格网"、"显示注记"等），该控件的所有设置选项会自动展开。

**效果**：
- ✅ 区域背景为正常彩色
- ✅ 所有设置项可见可操作
- ✅ 标题下方显示设置内容

### 2. 禁用控件
取消勾选控件的"显示"复选框，该控件的所有设置选项会自动折叠隐藏。

**效果**：
- 🔒 区域背景变为灰色渐变
- 🔒 透明度降低（70%）
- 🔒 标题显示"（未启用）"
- 🔒 所有设置项完全隐藏
- 🔒 区域内边距缩小

## 支持的控件

智能折叠功能支持以下控件：

- 📐 **经纬度格网** - 包括间隔、线条样式、标注位置等所有设置
- 📝 **地图注记** - 包括样式选择、字段显示、注记信息填写等
- 🧭 **指北针** - 包括样式选择、大小调整等
- 📏 **比例尺** - 包括样式选择、宽度设置等
- 🗺️ **图例** - 包括样式选择、尺寸设置等

## UI设计特色

### 现代化视觉风格
- 🎨 渐变色背景
- 🎨 圆角卡片设计
- 🎨 阴影层次效果
- 🎨 平滑过渡动画

### 交互反馈
- 🖱️ 悬停时颜色和阴影变化
- 🖱️ 点击时按钮下陷效果
- 🖱️ 切换按钮旋转动画
- 🖱️ 折叠/展开流畅过渡

### 色彩系统
- **主色调**：紫色渐变（#667eea → #764ba2）
- **背景色**：淡灰色系
- **导出区域**：蓝灰渐变 + 紫色边框
- **提示区域**：黄色渐变 + 金色边框
- **折叠状态**：灰色渐变 + 降低透明度

## 快捷键说明

当前版本暂未添加快捷键支持，所有操作通过鼠标点击完成。

## 最佳实践

1. **工作流程**：
   - 先确定需要使用哪些控件
   - 勾选对应的"显示"复选框
   - 配置展开的设置选项
   - 不需要的控件保持关闭状态

2. **性能优化**：
   - 关闭未使用的控件可以提高渲染性能
   - 减少DOM元素数量，加快页面响应速度

3. **界面整洁**：
   - 只展开正在配置的控件设置
   - 配置完成后可以关闭，避免界面拥挤

## 技术细节

### 实现原理
```javascript
// 当控件状态改变时
_toggleSettingsPanel(sectionId, enabled, excludeCheckboxId) {
  if (enabled) {
    // 显示设置区域
    settingsContainer.style.display = '';
    section.classList.remove('section-collapsed');
  } else {
    // 隐藏设置区域
    settingsContainer.style.display = 'none';
    section.classList.add('section-collapsed');
  }
}
```

### CSS类说明
```css
/* 折叠状态 */
.section-collapsed {
  background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
  opacity: 0.7;
  padding: 8px 12px;
}

/* 未启用标签 */
.section-collapsed h4::after {
  content: '（未启用）';
  font-size: 11px;
  color: #999;
  font-style: italic;
}
```

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ⚠️ IE11 不支持（渐变色和动画可能异常）

## 反馈与建议

如有任何问题或建议，欢迎提交 Issue 或 Pull Request。

---

更新日期：2025-10-30

